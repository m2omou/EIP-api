
<% content_for :head do -%>
<%= stylesheet_link_tag    'bootstrap' %>
<%= stylesheet_link_tag    'reset' %>
<%= stylesheet_link_tag    'bootstrap.min' %>
<%= stylesheet_link_tag    'bootstrap-responsive.min' %>
<%= stylesheet_link_tag    'prettyPhoto' %>
<%= stylesheet_link_tag    'style' %>
<%= stylesheet_link_tag    'style-responsive' %>
<%= stylesheet_link_tag    'flexslider' %>
<%= javascript_include_tag 'jquery-1.10.2.min' %>
<%= javascript_include_tag 'dist/js/bootstrap' %>
<%= javascript_include_tag 'place' %>
<% end -%>

<% @place = Foursquare.find_place(@publication[:place_id]) %>

<br />
<br />
<div>
	<h1 style="padding-left:5%;font-size:30px;"> Souvenir de <%= User.find(@publication["user_id"]).username %> Ã  <a href=<%= "/places/" + @place[:result][:place][:id].to_s %> style="color: blue;"><%= @place[:result][:place][:name] %></a> le 
		<%= @publication["created_at"].strftime("%T") %> 
		<%= @publication["created_at"].strftime("%B %d, %Y") %> :
	</h1>
	<div style="font-size:24px;padding-left:15%;">
		<%= @publication["content"] %>

		<% if @publication["type"] == "image" %>
			<br /><br />
			<img src=<%= @publication["url"] %> height="200" width="100">
			<br /><br />
		<% end %>
	</div>
	<h2 style="color: #2FBFAF;padding-left: 5%;"> Commentaires de ce souvenir : </h2><br />
	<div style="margin-left: 15%;margin-right: 15%;">

		<% comments = Comment.where(publication_id: @publication["id"]) %>
		<% comments.each do |comment| %>
			<div class="separate-line-publication" style="border-top: 1px solid;"></div>
			<div style="color: black"><%= comment["content"] %></div>
			<br />
			<div style="float: left">Author: <%= User.find(comment["user_id"]).username %></div>
			<div style="float: right"><%= comment["created_at"].strftime("%T") %> 
			<%= comment["created_at"].strftime("%B %d, %Y") %> </div>
			<br /><br />
		<% end %>
	</div>
		<h2 style="color: #2FBFAF;padding-left: 5%;"> Publier un commentaire sur ce souvenir : </h2><br />
		<div style="padding-left: 10%;padding-right:10%;">
		<% @new_comment = Comment.new %>
		<%= form_for @new_comment, :html => {:multipart => true} do |f| %>
			<% if @new_comment.errors.any? %>
			<div id="error_explanation">
				<h2><%= pluralize(@new_comment.errors.count, "error") %> prohibited this publication from being saved:</h2>
				<ul>
					<% @new_comment.errors.full_messages.each do |msg| %>
					<li><%= msg %></li>
					<% end %>
				</ul>
			</div>
			<% end %>

			<div class="field">
				<%= f.text_area :content %>
			</div>
			<% if signed_in? %>
				<%= f.hidden_field :user_id, :value => session[:user_id] %>
			<% end %>
			<%= f.hidden_field :publication_id, :value => @publication["id"] %>
			<div class="actions">
				<%= f.submit :class => "btn btn-lg btn-success btn-block" %>
			</div>

			<% end %>
	</div>
		
</div>